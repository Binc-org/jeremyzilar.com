<?php

// The New York Times ------------------------------
$news = array(
	'id' => 0,
	'title' => 'News, Features, and Opinion',
	'name' => 'News, Features, and Opinion',
	'slug' => 'work',
	'backgroundColor' => '',
	'backgroundImg' => '',
	'img' => array(
		'work/dealbook.png',
		'work/thelede.png',
		'work/cityroom.png',
		'work/bits-2.png',
		'work/lens.png',
		'work/fivethirtyeight-2.png',
		'work/atwar-2.png',
		'work/sinosphere.png',
		'work/thecaucus.png',
		'work/well.png',
		'work/tmagazine.png',
		'work/dinersjournal.png',
		'work/opinionator.png',
		'work/roomfordebate.png',
		'work/krugman-2.png',
		'work/kristof-2.png',
		'work/dotearth.png',
		'work/freakonomics.png',
		'work/bittman.png',
		'work/keller.png',
		'work/takingnote.png',
		'work/niemann-haunted.png'
	),
	'desc' => '<p>In 2006, Jeremy was hired at The New York Times to design, build, and integrate blogs into The New York Times. He proceeded to design and develop a scalable framework for creative online publishing on NYTimes.com while setting out to teach writers and editors across the Times about the ethics of online publishing.</p> <p>He also established the first guidelines in the Times\' newsroom for moderating reader comments and interaction.</p>',
	'urls' => array(
		'DealBook' => 'http://dealbook.nytimes.com',
		'The Lede' => 'http://thelede.blogs.nytimes.com',
		'City Room' => 'http://cityroom.blogs.nytimes.com',
		'Bits' => 'http://bits.blogs.nytimes.com',
		'Lens' => 'http://lens.blogs.nytimes.com',
		'FiveThirtyEight' => 'http://fivethirtyeight.blogs.nytimes.com',
		'At War' => 'http://atwar.blogs.nytimes.com',
		'Sinosphere' => 'http://sinosphere.blogs.nytimes.com',
		'WELL' => 'http://well.blogs.nytimes.com',
		'T Magazine' => 'http://tmagazine.blogs.nytimes.com',
		'Diners Journal' => 'http://artsbeat.blogs.nytimes.com',
		'The Caucus' => 'http://thecaucus.blogs.nytimes.com',
		'Opinionator' => 'http://opinionator.blogs.nytimes.com',
		'Room for Debate' => 'http://roomfordebate.blogs.nytimes.com',
		'Paul Krugman' => 'http://krugman.blogs.nytimes.com',
		'Nicholas Kristof' => 'http://kristof.blogs.nytimes.com',
		'Dot Earth / Andrew Revkin' => 'http://dotearth.blogs.nytimes.com',
		'Freakonomics' => 'http://freakonomics.blogs.nytimes.com',
		'Mark Bittman' => 'http://bittman.blogs.nytimes.com',
		'Bill Keller' => 'http://keller.blogs.nytimes.com',
		'Taking Note / Andrew Rosenthal & Editorial Board' => 'http://takingnote.blogs.nytimes.com',
		'Christoph Niemann' => 'http://niemann.blogs.nytimes.com'
	)
);


$breaking_news = array(
	'id' => 1,
	'title' => 'Live Coverage and Breaking News',
	'name' => 'Breaking News',
	'slug' => 'breaking_news',
	'backgroundColor' => '',
	'backgroundImg' => '',
	'img' => array(
		'work/hurricane-sandy-edited.png',
		'work/thelede-boston-marathon.png',
		'work/election-2012.png',
		'work/thelede-nasa-curiosity.png',
		'work/green.png',
		'work/cityroom-spitzer-qa.png'
	),
	'desc' => "<p>Jeremy has been behind much of the way The New York Times covers live events and breaking news.</p><p>During the 2006 The World Cup, Jeremy lead the Times' first live, real-time coverage of a news event. Since then, he has helped shape the coverage of 2 Presidential Elections, 4 Olympic Games, 3 World Cups, 1 Mars landing, multiple hurricanes — both near and far, countless breaking news events, crossword tournaments, Apple live events, fashion shows and debates.</p>",
	'urls' => array(
		'Hurricane Sandy / Live Coverage' => 'http://www.nytimes.com/interactive/2012/10/28/nyregion/hurricane-sandy.html',
		'Boston Marathon' => 'http://thelede.blogs.nytimes.com/2013/04/15/live-updates-explosion-at-boston-marathon/',
		'Election 2012' => 'http://elections.nytimes.com/2012/results/live-coverage',
		'NASA Curiosity / Mars Landing' => 'http://thelede.blogs.nytimes.com/2012/08/05/curiosity-is-set-to-land-on-mars/',
		'Oil Spill Resources' => 'http://green.blogs.nytimes.com/oil-spill-resources/',
		'Q&A About Elliot Spitzer' => 'http://cityroom.blogs.nytimes.com/2008/03/13/the-times-answers-spitzer-scandal-questions/',
		'Annotated Speech: Obama' => 'http://green.blogs.nytimes.com/oil-spill-resources/'
	)
);


$opinion = array(
	'id' => 2,
	'title' => 'Opinion',
	'name' => 'Opinion',
	'slug' => 'opinion',
	'backgroundColor' => '',
	'img' => array(
		'work/opinionator.png',
		'work/roomfordebate.png',
		'work/krugman-2.png',
		'work/kristof-2.png',
		'work/dotearth.png',
		'work/freakonomics.png',
		'work/bittman.png',
		'work/keller.png',
		'work/takingnote.png',
		'work/niemann-haunted.png'
	),
	'desc' => '',
	'urls' => array(
		'Opinionator' => 'http://opinionator.blogs.nytimes.com',
		'Room for Debate' => 'http://roomfordebate.blogs.nytimes.com',
		'Paul Krugman' => 'http://krugman.blogs.nytimes.com',
		'Nicholas Kristof' => 'http://kristof.blogs.nytimes.com',
		'Dot Earth / Andrew Revkin' => 'http://dotearth.blogs.nytimes.com',
		'Freakonomics' => 'http://freakonomics.blogs.nytimes.com',
		'Mark Bittman' => 'http://bittman.blogs.nytimes.com',
		'Bill Keller' => 'http://keller.blogs.nytimes.com',
		'Taking Note / Andrew Rosenthal & Editorial Board' => 'http://takingnote.blogs.nytimes.com',
		'Christoph Niemann' => 'http://niemann.blogs.nytimes.com'
	)
);


$features = array(
	'id' => 3,
	'title' => 'Features, Fashion and Lifestyle',
	'name' => 'Features / Lifestyle',
	'slug' => 'features',
	'backgroundColor' => '',
	'backgroundImg' => '',
	'img' => array(
		'work/well.png',
		'work/tmagazine.png',
		'work/dinersjournal.png'
	),
	'desc' => '',
	'urls' => array(
		'WELL' => 'http://well.blogs.nytimes.com',
		'T Magazine' => 'http://tmagazine.blogs.nytimes.com',
		'Diners Journal' => 'http://artsbeat.blogs.nytimes.com'
	)
);

$sports = array(
	'id' => 4,
	'title' => 'Sports',
	'name' => 'Sports',
	'slug' => 'sports',
	'backgroundColor' => '',
	'backgroundImg' => '',
	'img' => array(
		'work/worldcup06.png',
		'work/krugman-2.png',
		'work/kristof-2.png'
	),
	'desc' => ''
);


$local = array(
	'id' => 5,
	'title' => 'Local News and Education',
	'name' => 'Local News',
	'slug' => 'local',
	'backgroundColor' => '',
	'backgroundImg' => '',
	'img' => array(
		'work/eastvillage.png',
		'work/fort-greene.png'
	),
	'desc' => '<p>In 2011, Jeremy was part of a team in the newsroom charged with building out a network of local news blogs in the New York region, starting with two; one in Maplewood, N.J and the other in Fort Greene, Brooklyn.</p> <p>In the second year, the project pivoted to work with students from Jay Rosen&#x27;s Studio 20 program at NYU and CUNY&#x27;s Journalism program.</p>',
	'urls' => array(
		'East Village / NYU' => 'http://eastvillage.thelocal.nytimes.com',
		'Fort Greene / CUNY' => 'http://fort-greene.thelocal.nytimes.com'
	)
);

$divider = array(
	'id' => 6,
	'title' => '',
	'name' => '',
	'slug' => 'divider',
	'backgroundColor' => '',
	'backgroundImg' => '',
	'img' => '',
	'desc' => ''
);

$analytics = array(
	'id' => 7,
	'title' => 'Data Visualization and Research',
	'name' => 'Data Visualization and Research',
	'slug' => 'data-vis',
	'backgroundColor' => '',
	'backgroundImg' => '',
	'img' => array(
		'work/kittens.png',
		'work/newsdesk-home.png'
	),
	'desc' => '<p>For many years, Jeremy has been working with the Times\' cross-platform traffic data into accessible dashboards and displays that help editors to understand our audience, digest real-time information about out stories, and help them take reasonable actions based off this data.</p><p>Understanding audience starts with asking the right questions of your data.</p>
		<ul>
		<li>What percentage of readers to a story have not been to the Times in 30 days? Or how many new readers are we attracting?</li> 
		<li>Where are these readers coming from? Search? Twitter? Google News?</li>
		<li>What percentage of a story are readers reading?</li>
		<li>What percentage are subscribers, and are they in the New York area?</li>
		<li>What percentage took an action (shared, e-mailed, or commented) on this story?</li>
		<li>Was this story on the homepage, and if so, for how long?</li>
		</ul>'
);

$intranet = array(
	'id' => 7,
	'title' => 'Internal Communication & Documentation',
	'name' => 'Intranet',
	'slug' => 'intranet',
	'backgroundColor' => '',
	'backgroundImg' => '',
	'img' => array(
		'work/insite.png',
		'work/insite-identity.png',
		'work/insite-benefits.png',
		'work/insite-policies.png',
		'work/insite-diversity.png'
	),
	'desc' => '<p>I designed, built, architected and coordinated the launch of InSite, The Times’ internal, company news and documentation site.</p>'
);


$nyt = array(
	'id' => 0,
	'section' => 'The New York Times',
	'slug' => 'nytimes',
	'desc' => '',
	'years' => '2006 — Present',
	'url' => 'http://nytimes.com',
	'img' => 'work/nytimes-logo.png',
	'projects' => array($news,$breaking_news,$local,$divider,$analytics,$intranet,)
);



// Rookie Magazine ------------------------------

$rookiemag = array(
	'id' => 0,
	'title' => 'Rookie Magazine',
	'name' => 'Advisor',
	'slug' => 'rookiemag',
	'backgroundColor' => '',
	'backgroundImg' => 'http://static.rookiemag.com/2012/08/1343808938aug2012edletterfeat.jpg',
	'img' => array(
		'work/rookiemag.png',
		'work/rookiemag-post.png'
	),
	'desc' => '<p>I have been fortunate to play a part in the realization of a remarkable project by Tavi Gevinson. In September 2011, I was approached by a group of talented friends and colleagues in New York City who were trying to get Tavi&#x27;s new site Rookie designed, developed and launched in less than a month. I helped to bring together a supporting team of developers, designers to build Rookie from the ground up. I continue to be an advisor and mentor to the project.</p>',
	'urls' => array(
		'Rookie Magazine' => 'http://rookiemag.com'
	)
);

$rookie = array(
	'id' => 1,
	'section' => 'Rookie Magazine',
	'slug' => 'rookie',
	'desc' => 'desc desc',
	'years' => '',
	'url' => 'http://rookiemag.com',
	'img' => 'work/rookie.png',
	'projects' => array($rookiemag)
);



// Maple Street School ------------------------------

$maplestreetschool = array(
	'id' => 0,
	'title' => 'Maple Street School',
	'name' => 'Communications & Identity',
	'slug' => 'maple-street-school',
	'backgroundColor' => '',
	'backgroundImg' => 'http://maplestreetschool.org/wp/wp-content/themes/mss/img/wc16.png',
	'img' => array(
		'work/maplestreet.png',
		'work/maplestreet-about.png',
		'work/maplestreet-dontations.png',
		'work/maplestreet-blog.png'
	),
	'desc' => '<p>From 2011—2014, Jeremy was the Board Chair of Communication and Design at Maple Street School, a Cooperative Pre-School in Brooklyn, New York.</p><p>As chair, he restructured the communication and technology across the school and redesigned the school\'s identity, website and application process.</p><p>He now serves on the school\'s Advisory Board.</p>',
	'urls' => array(
		'maplestreetschool.org' => 'http://maplestreetschool.org'
	)
);

$mss = array(
	'id' => 1,
	'section' => 'Maple Street School',
	'slug' => 'maple-street-school',
	'desc' => 'desc desc',
	'years' => '2011 — Present',
	'url' => 'http://maplestreetschool.org',
	'img' => '',
	'projects' => array($maplestreetschool)
);





// ALL JOBS ------------------------------
$jobs = array($nyt, $rookie, $mss);
// print_r($jobs);
// echo json_encode($jobs, JSON_PRETTY_PRINT);




// Logic for Navigation
function get_project_nav($jobs){
	foreach ($jobs as $key => $job) {
		// print_r($job);
		$section = $job['section'];
		$slug = $job['slug'];
		$desc = $job['desc'];
		$projects = $job['projects'];
		echo <<< EOF
			<li><a href="#$slug" title="$section">$section</a>
EOF;
		if ($projects !== '') {
			echo '<ul class="nav">';
			foreach ($job['projects'] as $key => $project) {
				// print_r($project);
				$title = $project['title'];
				$name = $project['name'];
				$slug = $project['slug'];
				if ($slug == 'divider') {
					echo '<li class="divider"></li>';
					continue;
				}
				$img = $project['img'];
				$desc = $project['desc'];
				$url = $project['url'];
				echo <<< EOF
					<li><a href="#$slug" title="$title">$name <span class="dot img-circle"></span></a></li>
EOF;
			}
			echo '</ul>';
		}
		echo '</li>';
	}
}


// Logic for Projects
function get_projects($jobs){
	foreach ($jobs as $key => $job) {
		// print_r($job);
		$section = $job['section'];
		$slug = $job['slug'];
		$desc = $job['desc'];
		$img = $job['img'];
		$y = $job['years'];
		$years = '';
		if (!empty($y)) {
			$years = '<p class="years">'.$y.'</p>';
		}
		$url = $job['url'];
		$logo = '';
		if ($img !== '') {
			$logo = '<img class="job-logo" src="'.$img.'" alt="'.$section.'"/>';
		}
		$projects = $job['projects'];
		// echo '<hr id="'.$slug.'"/>';
		$hed = <<< EOF
			<div id="$slug" class="hed">
				$logo
			</div>
EOF;
		// echo $hed;
		if ($projects !== '') {
			$i = 0;
			foreach ($job['projects'] as $key => $project) {
				// print_r($project);
				$id = $project['id'];
				$title = $project['title'];
				$name = $project['name'];
				$slug = $project['slug'];
				$backgroundColor = $project['backgroundColor'];
				if (!empty($backgroundColor)) {
					$bg = 'background-color:' . $backgroundColor . ';';
				} else {
					$bg = '';
				}
				$backgroundImg = $project['backgroundImg'];
				$bgimg = '';
				$bgclass = '';
				if (!empty($backgroundImg)) {
					$bgimg = 'style="background: '.$bg.' url('. $backgroundImg .') no-repeat; background-size:100%;"';
					$bgclass = "bg";
				}
				if ($slug == 'divider') { continue; }
				$img = $project['img'];
				$desc = $project['desc'];
				$urls = $project['urls'];
				if (!$i == 0) {
					$hed = '';
				}
				$hr = '<hr class="divider"/>';
				if ($i == 0) {
					$hr = '';
				}
				echo <<<EOF
					<section id="$slug" class="project $bgclass" $bgimg>
						$hed
						<div class="container">
							<div class="row project-body">
								<div class="col-xs-12 col-sm-6 col-sm-push-6 col-md-6 col-md-push-6 col-lg-6 col-lg-pull-6">
									<h3>$title</h3>
									<div class="desc">
										$desc
									</div>
EOF;
									if (!empty($urls)) {
										echo '<ul class="urls even">';
										$oo = 0;
										foreach ($urls as $name => $url) {
											if ($oo % 2 == 0) {
												echo '<li><a href="'.$url.'">'.$name.'</a>&nbsp;<span>&#x025B8;</span></li>';
											}
											$oo++;
										}
										echo '</ul>';
									}
									if (!empty($urls)) {
										echo '<ul class="urls odd">';
										$oo = 0;
										foreach ($urls as $name => $url) {
											if ($oo&1) {
												echo '<li><a href="'.$url.'">'.$name.'</a>&nbsp;<span>&#x025B8;</span></li>';
											}
											$oo++;
										}
										echo '</ul>';
									}
									echo <<< EOF
								</div>
								<div class="slides col-xs-12 col-sm-6 col-sm-pull-6 col-md-6 col-md-pull-6 col-lg-6 col-lg-pull-6">
EOF;
									show_slides($slug,$img,$title);
									echo <<<EOF
								</div>
							</div>
						</div>
					</section>
EOF;
				$i++;
			}
		}
	}
}

function show_examples($slug,$img,$title){
	$slug = 'examples_'.$slug;
	echo <<< EOF
		<div id="$slug" class="carousel slide work" data-ride="carousel">
			<ol class="carousel-indicators">
EOF;
			$i = 0;
			foreach ($img as $src) {
				if ($i == 0) {
					$active = 'active';
				} else {
					$active = '';
				}
				echo <<< EOF
				<li data-target="#$slug" data-slide-to="$i" class="$active"></li>
EOF;
				$i++;
			}
			echo <<< EOF
			</ol>
		  <!-- Wrapper for slides -->
		  <div class="carousel-inner">
EOF;
			$i = 0;
			foreach ($img as $src) {
				if ($i == 0) {
					$active = 'active';
				} else {
					$active = '';
				}
				echo <<< EOF
					<div class="item $active">
						<img src="$src" class="img-responsive" />
					</div>
EOF;
				$i++;
			}
			echo <<< EOF
		  </div>

		  <!-- Controls -->
		  <a class="left carousel-control" href="#$slug" data-slide="prev">
		    <span class="glyphicon glyphicon-chevron-left"></span>
		  </a>
		  <a class="right carousel-control" href="#$slug" data-slide="next">
		    <span class="glyphicon glyphicon-chevron-right"></span>
		  </a>
		</div>
EOF;

}


function show_slides($slug,$img,$title){
	$slug = 'slides-'.$slug;
	echo <<< EOF
		<div id="$slug" class="cycle-slideshow work" data-cycle-slides="> .item" data-cycle-fx="fade" data-cycle-pager-template="<span></span>" data-cycle-pause-on-hover="true" data-cycle-loader='true'>
			<div class="cycle-prev"></div>
	    <div class="cycle-next"></div>
			<div class="cycle-pager"></div>
EOF;
	$i = 0;
	foreach ($img as $src) {
		if ($i == 0) {
			$active = 'active';
		} else {
			$active = '';
		}
		echo <<< EOF
			<div class="item $active">
				<img src="$src" class="img-responsive" />
			</div>
EOF;
		$i++;
	}
	echo '</div>';
}
?>